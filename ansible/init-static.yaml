---
# ansible-playbook ansible/init-static.yaml -i '[IP],'

- hosts: all
  remote_user: root
  gather_facts: no

  tasks:
    - file: src=/usr/share/zoneinfo/UTC dest=/etc/localtime state=link force=yes
    - file: path=/var/projects/ state=directory mode=0755
    - file: path=/var/log/scroll/ state=directory mode=0755

    - name: install nginx
      apt: pkg=nginx state=installed update_cache=true
      notify:
        - start nginx

    - name: configure nginx
      copy: src=./nginx.conf dest=/etc/nginx/conf.d/default.conf
      notify: reload nginx

    - service: name=nginx state=started enabled=yes

  handlers:
    - name: start nginx
      service: name=nginx state=started

    - name: reload nginx
      service: name=nginx state=reloaded
