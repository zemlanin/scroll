<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" xmlns:og="http://opengraphprotocol.org/schema/">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/vnd.microsoft.icon" href="{{ blog.static.favicon.ico }}" />
  <link rel="icon" type="image/png" href="{{ blog.static.favicon.png }}" />
  <link rel="icon" type="image/svg+xml" href="{{ blog.static.favicon.svg }}" />
  <link rel="apple-touch-icon-precomposed" href="{{ blog.static.favicon.png }}" />
  <link rel="mask-icon" href="{{ blog.static.mask-icon.svg }}" color="#00a500" />
  <title>
    embeds{{# url }} - {{url}}{{/url}}
  </title>
  <style type="text/css">
    {{> header.css}}
    {{> highlight.css}}
    input {
      font-size: 0.9em;
    }
  </style>
  <script type="text/javascript">
    {{> header.js}}
  </script>
</head>
<body>
<header
  style="display: flex; flex-flow: row wrap; justify-content: space-between; border-bottom: 2px #ddd solid; margin-bottom: 0.3em;"
>
  <a href="/backstage/embeds">&larr; embeds</a>
  <form method="GET" action="/backstage/embeds">
    <input name="url" type="url" value="{{ url }}"
      {{^ cardHTML }}autofocus{{/ cardHTML }}
    >
    <button>&rarr;</button>
    <button name="request" value="1">&circlearrowright;</button>
  </form>
  <form method="POST" action="#" style="width: 100%">
    <input type="hidden" name="original_url" value="{{url}}">
    {{# existingEmbed }}
      <a>saved @ {{ existingEmbed.created }}</a>
    {{/ existingEmbed }}
    {{# status.saved }}
      <button name="delete" value="1" onclick="return confirm('are you sure?');">delete</button>
    {{/ status.saved }}
    {{# status.requested }}
      <input type="hidden" name="raw_metadata" value="{{rawMetadataJSON}}">
      <input type="hidden" name="rendered_html" value="{{cardHTML}}">
      <button name="save" value="1">save</button>
    {{/ status.requested }}
  </form>
</header>
<main>

<article>
  {{{ cardHTML }}}

  {{# requested }}
  <pre><code>{{ requested.cardJSON }}</code></pre>
  {{/ requested }}

  {{# requested.parsedMetadataJSON }}
  <pre><code>{{ requested.parsedMetadataJSON }}</code></pre>
  {{/ requested.parsedMetadataJSON }}

  <pre {{^ rawMetadata }}hidden{{/ rawMetadata }}><code>{{# rawMetadata }}{{#name}}&lt;meta name="{{name}}" content="{{content}}"&gt;{{/name}}{{#property}}&lt;meta property="{{property}}" content="{{content}}"&gt;{{/property}}
{{/ rawMetadata }}</code></pre>
</article>

</main>
</body>
</html>
